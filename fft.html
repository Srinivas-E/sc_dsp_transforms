
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>module_fft &mdash; DSP transformations v0v1 documentation</title>
    <link rel="stylesheet" href="_static/xdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0v1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://mathjax.connectmv.com/MathJax.js"></script>
    <script type="text/javascript" src="_static/xcomment.js"></script>
    <link rel="top" title="DSP transformations v0v1 documentation" href="index.html" />
    <link rel="next" title="module_dct_jpeg" href="dct-jpeg.html" />
    <link rel="prev" title="Documentation" href="index.html" /> 

<script>
function setheight() {
h1 = document.getElementById('d1').style.height;
h2 = document.getElementById('d2').style.height;

if (parseInt(h1) > parseInt(h2)) {
document.getElementById('d2').style.height=h1 + "px";
}
else {
document.getElementById('d1').style.height=h2 + "px";
}

}
</script>
</head>

<body onload="setheight();">

  

    <div class="document" id='d1'>
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
<div style="float: right">
<a href="index.html"
                        title="previous chapter"> &lt&lt </a>
<a href="dct-jpeg.html"
                        title="next chapter"> &gt&gt </a></p>
</div>

            
  <div class="section" id="module-fft">
<h1>module_fft<a class="headerlink" href="#module-fft" title="Permalink to this headline">¶</a></h1>
<p>The FFT module implements a set of functions that can be used to compute
the FFT of a set of complex data points, or the inverse.</p>
<div class="section" id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<div class="section" id="sine-arrays">
<h3>Sine arrays<a class="headerlink" href="#sine-arrays" title="Permalink to this headline">¶</a></h3>
<p>The include file &#8220;fft.h&#8221; defines a set of arrays that are to be used with
the FFT functions, called sine_8[], sine_16[], ..., sine_8192[]. Depending on the
number of points, pick the appropriate array and pass it to fftForward and
fftInverse as required.</p>
</div>
<div class="section" id="fft-functions">
<h3>FFT functions<a class="headerlink" href="#fft-functions" title="Permalink to this headline">¶</a></h3>
<dt><dl class="function">
<dt id="fftTwiddle">
void <tt class="descname">fftTwiddle</tt><big>(</big>int<em>&nbsp;re[]</em>, int<em>&nbsp;im[]</em>, int<em>&nbsp;N</em><big>)</big><a class="headerlink" href="#fftTwiddle" title="Permalink to this definition">¶</a></dt>
<dd><p>This function twiddles the arrays around prior to computing an FFT.</p>
<p>A calling sequence for a forward FFT involves <a class="reference internal" href="#fftTwiddle" title="fftTwiddle"><span>fftTwiddle()</span></a> followed by <a class="reference internal" href="#fftForward" title="fftForward"><span>fftForward()</span></a>, and for an inverse FFT it involves <a class="reference internal" href="#fftTwiddle" title="fftTwiddle"><span>fftTwiddle()</span></a> followed by <a class="reference internal" href="#fftInverse" title="fftInverse"><span>fftInverse()</span></a>. In some cases twiddling can be avoided, for example when computing a convolution.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>re</strong> &#8211; real part of each input point</li>
<li><strong>im</strong> &#8211; imaginary part of each input point</li>
<li><strong>N</strong> &#8211; number of points. Must be a power of 2, both re and im should be N long</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dt><dl class="function">
<dt id="fftForward">
void <tt class="descname">fftForward</tt><big>(</big>int<em>&nbsp;re[]</em>, int<em>&nbsp;im[]</em>, int<em>&nbsp;N</em>, int<em>&nbsp;sine[]</em><big>)</big><a class="headerlink" href="#fftForward" title="Permalink to this definition">¶</a></dt>
<dd><p>This function computes a forward FFT.</p>
<p>The complex input array is supplied as two arrays of integers, with numbers represented as fixed-point values. The number of points must be a power of 2, and the array of sine values should contain a quarter sine-wave. Use one of sine_N provided in sine.h. The function does not perform a bit-twiddle - if required then <a class="reference internal" href="#fftTwiddle" title="fftTwiddle"><span>fftTwiddle()</span></a> should be called beforehand.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>re</strong> &#8211; real part of each input point</li>
<li><strong>im</strong> &#8211; imaginary part of each input point</li>
<li><strong>N</strong> &#8211; number of points. Must be a power of 2, both re and im should be N long</li>
<li><strong>sine</strong> &#8211; array of N/4+1 sine values, each represented as a sign bit, and a 31 bit fraction. 1 should be represented as 0x7fffffff.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dt><dl class="function">
<dt id="fftInverse">
void <tt class="descname">fftInverse</tt><big>(</big>int<em>&nbsp;re[]</em>, int<em>&nbsp;im[]</em>, int<em>&nbsp;N</em>, int<em>&nbsp;sine[]</em><big>)</big><a class="headerlink" href="#fftInverse" title="Permalink to this definition">¶</a></dt>
<dd><p>This function computes an inverse FFT.</p>
<p>The complex input array is supplied as two arrays of integers, with numbers represented as fixed-point values. The number of points must be a power of 2, and the array of sine values should contain a quarter sine-wave. Use one of sine_N provided in sine.h. The function does not perform a bit-twiddle - if required then <a class="reference internal" href="#fftTwiddle" title="fftTwiddle"><span>fftTwiddle()</span></a> should be called beforehand.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>re</strong> &#8211; real part of each input point</li>
<li><strong>im</strong> &#8211; imaginary part of each input point</li>
<li><strong>N</strong> &#8211; number of points. Must be a power of 2, both re and im should be N long</li>
<li><strong>sine</strong> &#8211; array of N/4+1 sine values, each represented as a sign bit, and a 31 bit fraction. 1 should be represented as 0x7fffffff.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dt><dl class="function">
<dt id="fftTwoRealsForward">
void <tt class="descname">fftTwoRealsForward</tt><big>(</big>int<em>&nbsp;re1[]</em>, int<em>&nbsp;re2[]</em>, int<em>&nbsp;im1[]</em>, int<em>&nbsp;im2[]</em>, int<em>&nbsp;N</em>, int<em>&nbsp;sine[]</em><big>)</big><a class="headerlink" href="#fftTwoRealsForward" title="Permalink to this definition">¶</a></dt>
<dd><p>This function computes the FFT of two real sequences in one go.</p>
<p>It uses a nifty trick () that enables one to use a single complex FFT to compute two real FFTs simultaneously. The real inputs should be in the first two real arrays, the output is in the real and imaginary arrays (the output of a real FFT is still a complex number).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>re1</strong> &#8211; array of first set of real numbers on which to compute FFT, on output this array stores the real part of the complex FFT on this set of numbers.</li>
<li><strong>re2</strong> &#8211; array of second set of real numbers on which to compute FFT, on output this array stores the real part of the complex FFT on this set of numbers.</li>
<li><strong>im1</strong> &#8211; imaginary parts of complex FFT of first array</li>
<li><strong>im2</strong> &#8211; imaginary parts of complex FFT of second array</li>
<li><strong>N</strong> &#8211; number of points</li>
<li><strong>sine</strong> &#8211; table with sine values.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dt><dl class="function">
<dt id="fftTwoRealsInverse">
void <tt class="descname">fftTwoRealsInverse</tt><big>(</big>int<em>&nbsp;re1[]</em>, int<em>&nbsp;re2[]</em>, int<em>&nbsp;im1[]</em>, int<em>&nbsp;im2[]</em>, int<em>&nbsp;N</em>, int<em>&nbsp;sine[]</em><big>)</big><a class="headerlink" href="#fftTwoRealsInverse" title="Permalink to this definition">¶</a></dt>
<dd><p>This function computes the inverse FFT on two sets of complex data that are known to result in real numbers only in one go.</p>
<p>It uses a nifty trick () that enables one to use a single complex inverse FFT to compute two real inverse FFTs simultaneously. The outputs are in the two real arrays, the imaginary arrays are unchanged.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>re1</strong> &#8211; real part of first set of complex numbers on which to compute inverse FFT</li>
<li><strong>re2</strong> &#8211; real part of second set of complex numbers on which to compute inverse FFT</li>
<li><strong>im1</strong> &#8211; imaginary part of first set of complex numbers on which to compute inverse FFT</li>
<li><strong>im2</strong> &#8211; imaginary part of second set of complex numbers on which to compute inverse FFT</li>
<li><strong>N</strong> &#8211; number of points</li>
<li><strong>sine</strong> &#8211; table with sine values.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="example-program">
<h3>Example program<a class="headerlink" href="#example-program" title="Permalink to this headline">¶</a></h3>
<p>Below is an example calling sequence:</p>
<div class="highlight-none"><div class="highlight"><pre>#include &quot;fft.h&quot;

int main(void) {
  int re[8], im[8];

  for(int i = 0; i &lt; 8; i++) {
    // Fill re and im.
  }
  fftTwiddle(re, im, 8);
  fftForward(re, im, 8, sine_8);

  // Modify re and im, which are in the frequency domain

  fftTwiddle(re, im, 8);
  fftInverse(re, im, 8, sine_8);

  // and back to the time domain
}
</pre></div>
</div>
</div>
</div>
</div>



          </div>
        </div>
      </div>
      <div class="sphinxsidebar" id='d2'>
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">DSP transformations (0v1)</a></h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">module_fft</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#api">API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sine-arrays">Sine arrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fft-functions">FFT functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-program">Example program</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dct-jpeg.html">module_dct_jpeg</a></li>
<li class="toctree-l1"><a class="reference internal" href="huffman-jpeg.html">module_huffman_jpeg</a></li>
</ul>

<div id="searchbox" style="display: none;margin-bottom: 10px;">
  <h3>Search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>



    <div class="footer">
    </div>
  </body>
</html>



