// Copyright (c) 2011, XMOS Ltd, All rights reserved
// This software is freely distributable under a derivative of the
// University of Illinois/NCSA Open Source License posted in
// LICENSE.txt and at <http://github.xcore.com/>

#ifdef COMPUTECODES
#include <stdio.h>
// CCITT Rec. T.81 (1992 E)
int aclength[16][16];
int accode[16][16];

void fill(int k, int l, int le, int co) {
    aclength[k][l] = le;
    accode[k][l] = co;
}

main() {
    int cnt  = 0b1111111110000010;
    fill(      0, 0, 4, 0b1010);
    fill(      0, 1, 2, 0b00);
    fill(      0, 2, 2, 0b01);
    fill(      0, 3, 3, 0b100);
    fill(      0, 4, 4, 0b1011);
    fill(      0, 5, 5, 0b11010);
    fill(      0, 6, 7, 0b1111000);
    fill(      0, 7, 8, 0b11111000);
    fill(      0, 8, 10, 0b1111110110);
    fill(      1, 1, 4, 0b1100);
    fill(      1, 2, 5, 0b11011);
    fill(      1, 3, 7, 0b1111001);
    fill(      1, 4, 9, 0b111110110);
    fill(      1, 5, 11, 0b11111110110);
    fill(      2, 1, 5,  0b11100);
    fill(      2, 2, 8,  0b11111001);
    fill(      2, 3, 10, 0b1111110111);
    fill(      2, 4, 12, 0b111111110100);
    fill(      3, 1, 6,  0b111010);
    fill(      3, 2, 9,  0b111110111);
    fill(      3, 3, 12, 0b111111110101);
    fill(      4, 1, 6,  0b111011);
    fill(      4, 2, 10, 0b1111111000);
    fill(      5, 1, 7,  0b1111010);
    fill(      5, 2, 11, 0b11111110111);
    fill(      6, 1, 7,  0b1111011);
    fill(      6, 2, 12, 0b111111110110);
    fill(      7, 1, 8,  0b11111010);
    fill(      7, 2, 12, 0b111111110111);
    fill(      8, 1, 9,  0b111111000);
    fill(      8, 2, 15, 0b111111111000000);
    fill(      9, 1, 9,  0b111111001);
    fill(     10, 1, 9,  0b111111010);
    fill(     11, 1, 10, 0b1111111001);
    fill(     12, 1, 10, 0b1111111010);
    fill(     13, 1, 11, 0b11111111000);
    fill(     15, 0, 11, 0b11111111001);
    for(int i = 0; i<16; i++) {
        for(int j = 1; j < 11; j++) {
            if (aclength[i][j] == 0) {
                fill(i, j, 16, cnt++);
            }
        }
    }
    for(int i = 0; i < 16; i++) {
        for(int j = 0; j < 11; j++) {
            int z = accode[i][j];
            printf("// %1x/%1x  %2d  ", i, j, aclength[i][j]);
            for(int k = aclength[i][j]-1; k >= 0; k--) {
                putchar(((z >> k) & 1) + '0');
            }
            putchar('\n');
        }
    }
    printf("unsigned char aclengths[160] = {\n");
    for(int j = 0; j < 11; j++) {
        for(int i = 0; i < 16; i++) {
            printf("%2d,", aclength[i][j]);
        }
        printf("\n");
    }
    printf("};\n");
    printf("short accodes[160] = {\n");
    for(int j = 0; j < 11; j++) {
        for(int i = 0; i < 16; i++) {
            printf("%4x,", accode[i][j]);
        }
        printf("\n");
    }
    printf("};\n");
}
#endif
// 0/0   4  1010
// 0/1   2  00
// 0/2   2  01
// 0/3   3  100
// 0/4   4  1011
// 0/5   5  11010
// 0/6   7  1111000
// 0/7   8  11111000
// 0/8  10  1111110110
// 0/9  16  1111111110000010
// 0/a  16  1111111110000011
// 1/0   0  
// 1/1   4  1100
// 1/2   5  11011
// 1/3   7  1111001
// 1/4   9  111110110
// 1/5  11  11111110110
// 1/6  16  1111111110000100
// 1/7  16  1111111110000101
// 1/8  16  1111111110000110
// 1/9  16  1111111110000111
// 1/a  16  1111111110001000
// 2/0   0  
// 2/1   5  11100
// 2/2   8  11111001
// 2/3  10  1111110111
// 2/4  12  111111110100
// 2/5  16  1111111110001001
// 2/6  16  1111111110001010
// 2/7  16  1111111110001011
// 2/8  16  1111111110001100
// 2/9  16  1111111110001101
// 2/a  16  1111111110001110
// 3/0   0  
// 3/1   6  111010
// 3/2   9  111110111
// 3/3  12  111111110101
// 3/4  16  1111111110001111
// 3/5  16  1111111110010000
// 3/6  16  1111111110010001
// 3/7  16  1111111110010010
// 3/8  16  1111111110010011
// 3/9  16  1111111110010100
// 3/a  16  1111111110010101
// 4/0   0  
// 4/1   6  111011
// 4/2  10  1111111000
// 4/3  16  1111111110010110
// 4/4  16  1111111110010111
// 4/5  16  1111111110011000
// 4/6  16  1111111110011001
// 4/7  16  1111111110011010
// 4/8  16  1111111110011011
// 4/9  16  1111111110011100
// 4/a  16  1111111110011101
// 5/0   0  
// 5/1   7  1111010
// 5/2  11  11111110111
// 5/3  16  1111111110011110
// 5/4  16  1111111110011111
// 5/5  16  1111111110100000
// 5/6  16  1111111110100001
// 5/7  16  1111111110100010
// 5/8  16  1111111110100011
// 5/9  16  1111111110100100
// 5/a  16  1111111110100101
// 6/0   0  
// 6/1   7  1111011
// 6/2  12  111111110110
// 6/3  16  1111111110100110
// 6/4  16  1111111110100111
// 6/5  16  1111111110101000
// 6/6  16  1111111110101001
// 6/7  16  1111111110101010
// 6/8  16  1111111110101011
// 6/9  16  1111111110101100
// 6/a  16  1111111110101101
// 7/0   0  
// 7/1   8  11111010
// 7/2  12  111111110111
// 7/3  16  1111111110101110
// 7/4  16  1111111110101111
// 7/5  16  1111111110110000
// 7/6  16  1111111110110001
// 7/7  16  1111111110110010
// 7/8  16  1111111110110011
// 7/9  16  1111111110110100
// 7/a  16  1111111110110101
// 8/0   0  
// 8/1   9  111111000
// 8/2  15  111111111000000
// 8/3  16  1111111110110110
// 8/4  16  1111111110110111
// 8/5  16  1111111110111000
// 8/6  16  1111111110111001
// 8/7  16  1111111110111010
// 8/8  16  1111111110111011
// 8/9  16  1111111110111100
// 8/a  16  1111111110111101
// 9/0   0  
// 9/1   9  111111001
// 9/2  16  1111111110111110
// 9/3  16  1111111110111111
// 9/4  16  1111111111000000
// 9/5  16  1111111111000001
// 9/6  16  1111111111000010
// 9/7  16  1111111111000011
// 9/8  16  1111111111000100
// 9/9  16  1111111111000101
// 9/a  16  1111111111000110
// a/0   0  
// a/1   9  111111010
// a/2  16  1111111111000111
// a/3  16  1111111111001000
// a/4  16  1111111111001001
// a/5  16  1111111111001010
// a/6  16  1111111111001011
// a/7  16  1111111111001100
// a/8  16  1111111111001101
// a/9  16  1111111111001110
// a/a  16  1111111111001111
// b/0   0  
// b/1  10  1111111001
// b/2  16  1111111111010000
// b/3  16  1111111111010001
// b/4  16  1111111111010010
// b/5  16  1111111111010011
// b/6  16  1111111111010100
// b/7  16  1111111111010101
// b/8  16  1111111111010110
// b/9  16  1111111111010111
// b/a  16  1111111111011000
// c/0   0  
// c/1  10  1111111010
// c/2  16  1111111111011001
// c/3  16  1111111111011010
// c/4  16  1111111111011011
// c/5  16  1111111111011100
// c/6  16  1111111111011101
// c/7  16  1111111111011110
// c/8  16  1111111111011111
// c/9  16  1111111111100000
// c/a  16  1111111111100001
// d/0   0  
// d/1  11  11111111000
// d/2  16  1111111111100010
// d/3  16  1111111111100011
// d/4  16  1111111111100100
// d/5  16  1111111111100101
// d/6  16  1111111111100110
// d/7  16  1111111111100111
// d/8  16  1111111111101000
// d/9  16  1111111111101001
// d/a  16  1111111111101010
// e/0   0  
// e/1  16  1111111111101011
// e/2  16  1111111111101100
// e/3  16  1111111111101101
// e/4  16  1111111111101110
// e/5  16  1111111111101111
// e/6  16  1111111111110000
// e/7  16  1111111111110001
// e/8  16  1111111111110010
// e/9  16  1111111111110011
// e/a  16  1111111111110100
// f/0  11  11111111001
// f/1  16  1111111111110101
// f/2  16  1111111111110110
// f/3  16  1111111111110111
// f/4  16  1111111111111000
// f/5  16  1111111111111001
// f/6  16  1111111111111010
// f/7  16  1111111111111011
// f/8  16  1111111111111100
// f/9  16  1111111111111101
// f/a  16  1111111111111110
unsigned char aclengths[176] = {
 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,11,
 2, 4, 5, 6, 6, 7, 7, 8, 9, 9, 9,10,10,11,16,16,
 2, 5, 8, 9,10,11,12,12,15,16,16,16,16,16,16,16,
 3, 7,10,12,16,16,16,16,16,16,16,16,16,16,16,16,
 4, 9,12,16,16,16,16,16,16,16,16,16,16,16,16,16,
 5,11,16,16,16,16,16,16,16,16,16,16,16,16,16,16,
 7,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,
 8,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,
10,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,
16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,
16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,
};
short accodes[176] = {
   0xa,   0x0,   0x0,   0x0,   0x0,   0x0,   0x0,   0x0,   0x0,   0x0,   0x0,   0x0,   0x0,   0x0,   0x0, 0x7f9,
   0x0,   0xc,  0x1c,  0x3a,  0x3b,  0x7a,  0x7b,  0xfa, 0x1f8, 0x1f9, 0x1fa, 0x3f9, 0x3fa, 0x7f8,0xffeb,0xfff5,
   0x1,  0x1b,  0xf9, 0x1f7, 0x3f8, 0x7f7, 0xff6, 0xff7,0x7fc0,0xffbe,0xffc7,0xffd0,0xffd9,0xffe2,0xffec,0xfff6,
   0x4,  0x79, 0x3f7, 0xff5,0xff96,0xff9e,0xffa6,0xffae,0xffb6,0xffbf,0xffc8,0xffd1,0xffda,0xffe3,0xffed,0xfff7,
   0xb, 0x1f6, 0xff4,0xff8f,0xff97,0xff9f,0xffa7,0xffaf,0xffb7,0xffc0,0xffc9,0xffd2,0xffdb,0xffe4,0xffee,0xfff8,
  0x1a, 0x7f6,0xff89,0xff90,0xff98,0xffa0,0xffa8,0xffb0,0xffb8,0xffc1,0xffca,0xffd3,0xffdc,0xffe5,0xffef,0xfff9,
  0x78,0xff84,0xff8a,0xff91,0xff99,0xffa1,0xffa9,0xffb1,0xffb9,0xffc2,0xffcb,0xffd4,0xffdd,0xffe6,0xfff0,0xfffa,
  0xf8,0xff85,0xff8b,0xff92,0xff9a,0xffa2,0xffaa,0xffb2,0xffba,0xffc3,0xffcc,0xffd5,0xffde,0xffe7,0xfff1,0xfffb,
 0x3f6,0xff86,0xff8c,0xff93,0xff9b,0xffa3,0xffab,0xffb3,0xffbb,0xffc4,0xffcd,0xffd6,0xffdf,0xffe8,0xfff2,0xfffc,
0xff82,0xff87,0xff8d,0xff94,0xff9c,0xffa4,0xffac,0xffb4,0xffbc,0xffc5,0xffce,0xffd7,0xffe0,0xffe9,0xfff3,0xfffd,
0xff83,0xff88,0xff8e,0xff95,0xff9d,0xffa5,0xffad,0xffb5,0xffbd,0xffc6,0xffcf,0xffd8,0xffe1,0xffea,0xfff4,0xfffe,
 };

unsigned char ordering[63] = {
         1,  8, 16,  9,  2,  3, 10, 17, 24,
    32, 25, 18, 11,  4,  5, 12, 19, 26, 33,
    40, 48, 41, 34, 27, 20, 13,  6,  7, 14,
    21, 28, 35, 42, 49, 56, 57, 50, 43, 36,
    29, 22, 15, 23, 30, 37, 44, 51, 58, 59,
    52, 45, 38, 31, 39, 46, 53, 60, 61, 54,
    47, 55, 62, 63
};

unsigned char dclengths[12] = {2,3,3,3,3,3,4,5,6,7,8,9};

short dccodes[12] = {
    0b00,
    0b010, 
    0b011, 
    0b100, 
    0b101, 
    0b110, 
    0b1110, 
    0b11110, 
    0b111110, 
    0b1111110, 
    0b11111110, 
    0b111111110
};
