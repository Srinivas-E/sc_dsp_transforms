
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>DSP Transforms &mdash; DSP transformations 0v1 documentation</title>
    <link rel="stylesheet" href="_static/xdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0v1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://mathjax.connectmv.com/MathJax.js"></script>
    <script type="text/javascript" src="_static/xcomment.js"></script>
    <link rel="top" title="DSP transformations 0v1 documentation" href="index.html" />
    <link rel="next" title="module_fft" href="fft.html" />
    <link rel="prev" title="Documentation" href="index.html" /> 

<script>
function setheight() {
h1 = document.getElementById('d1').style.height;
h2 = document.getElementById('d2').style.height;

if (parseInt(h1) > parseInt(h2)) {
document.getElementById('d2').style.height=h1 + "px";
}
else {
document.getElementById('d1').style.height=h2 + "px";
}

}
</script>
</head>

<body onload="setheight();">

  

    <div class="document" id='d1'>
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
<div style="float: right">
<a href="index.html"
                        title="previous chapter"> &lt&lt </a>
<a href="fft.html"
                        title="next chapter"> &gt&gt </a></p>
</div>

            
  <div class="section" id="dsp-transforms">
<h1>DSP Transforms<a class="headerlink" href="#dsp-transforms" title="Permalink to this headline">¶</a></h1>
<p>DSP transformations perform functions such as FFTs or DFTs; they transform
between the time and frequency domains.</p>
<p>There are shelves of textbooks that cover filtering; a two-page summary is
necessarily incomplete. Typical characterisations of transformations include:</p>
<ul class="simple">
<li>The number of points. This is the number of smaples on which to run the
transform.</li>
<li>Whether it requires a forward or a backwards transform.</li>
<li>Type of filter. We at present only implemetn a one-dimensional FFT and a
two-dimensional DCT.</li>
</ul>
<p>As a rule of thumb, computational requirements are O(n log n) in the number
of points. Double the number of points doubles the time that an FFT takes
plus a bit more.</p>
<p>Typically, overflow leads to chaos. Numbers are typically
rounded to the nearest value, with 0.5 being rounded up.</p>
<div class="section" id="module-fft-simple">
<h2>module_fft_simple<a class="headerlink" href="#module-fft-simple" title="Permalink to this headline">¶</a></h2>
<p>This module provides function that performs forward and/or inverse
FFTs on sets of either complex or real points. The number of cycles taken for the
forward or inverse FFT is roughly the same.</p>
<div class="section" id="complex-fft">
<h3>Complex FFT<a class="headerlink" href="#complex-fft" title="Permalink to this headline">¶</a></h3>
<p>The table below shows the
number of thread cycles for the bit twiddling, and for performing either an
forward or an inverse FFT. The maximum rate shows the rate for performing a
twiddle, a forward FFT, a twiddle, and an inverse FFT on a single 50 MIPS
thread:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="17%" />
<col width="18%" />
<col width="12%" />
<col width="13%" />
<col width="12%" />
<col width="17%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td rowspan="2">Points</td>
<td colspan="2">Thread cycles</td>
<td rowspan="2"><p class="first">Max rate</p>
<p class="last">FFT+Inv</p>
</td>
<td rowspan="2">Error</td>
<td rowspan="2">Memory</td>
<td rowspan="2">Status</td>
</tr>
<tr class="row-even"><td>Twiddle</td>
<td>FFT</td>
</tr>
<tr class="row-odd"><td>64</td>
<td>886</td>
<td>10810</td>
<td>2137 Hz</td>
<td>3-4 bits</td>
<td>1 KB</td>
<td>Implemented</td>
</tr>
<tr class="row-even"><td>1024</td>
<td>14626</td>
<td>256340</td>
<td>92  Hz</td>
<td>5-6 bits</td>
<td>2 KB</td>
<td>Implemented</td>
</tr>
<tr class="row-odd"><td>N</td>
<td>14 N</td>
<td>25  N log N</td>
<td>2/N log N</td>
<td>N/2 bits</td>
<td>1 KB + N</td>
<td>Implemented</td>
</tr>
</tbody>
</table>
<p>The memory required comprises roughly 1K of code, and then extra space for
a sin() lookup table. It excludes storage for the data points, which
amounts to eight bytes per point (four bytes real part, and four bytes
imaginary part).</p>
<p>Note that there is a trade-off between rounding and accuracy - the inverse
FFT can be made more accurate (by half to one extra bit) at a cost of 5% extra
instructions. This is marked in the code. The errors are indications only,
maximum errors will be higher and are value dependent.</p>
</div>
<div class="section" id="real-fft">
<h3>Real FFT<a class="headerlink" href="#real-fft" title="Permalink to this headline">¶</a></h3>
<p>The table below shows the number of thread cycles for performing either an
forward or an inverse FFT. The maximum rate shows the rate for performing a
forward FFT, and an inverse FFT on a single 50 MIPS thread:</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="21%" />
<col width="16%" />
<col width="15%" />
<col width="13%" />
<col width="19%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Points</td>
<td>Thread cycles</td>
<td>Max rate</td>
<td>Error</td>
<td>Memory</td>
<td>Status</td>
</tr>
<tr class="row-even"><td>2 x 64</td>
<td>13332</td>
<td>1875 Hz</td>
<td>4 bits</td>
<td>1 KB</td>
<td>Implemented</td>
</tr>
<tr class="row-odd"><td>2 x 1024</td>
<td>294584</td>
<td>85  Hz</td>
<td>6 bits</td>
<td>2 KB</td>
<td>Implemented</td>
</tr>
<tr class="row-even"><td>2 x N</td>
<td>29  N log N</td>
<td>1.8/N log N</td>
<td>N/2+1 bits</td>
<td>1 KB + N</td>
<td>Implemented</td>
</tr>
</tbody>
</table>
<p>Note that the rate is slightly lower but that this computes <em>two real FFTs
simultaneously</em>, and is hence 1.8 times faster than its complex
counterpart.</p>
<p>The memory required comprises roughly 1K of code, and then extra space for
a sin() lookup table. It excludes storage for the data points, which
amounts to eight bytes per point (four bytes real part, and four bytes
imaginary part). (Even though the FFT is on real data, the answer is still
in the complex domain)</p>
<p>The real FFT uses the ocmplex FFT code, and the same tradeoff between
runtime and accuracy exists. The real code is half a bit less accurate
than its complex counterpart.</p>
</div>
</div>
</div>
<div class="section" id="module-dct-jpeg">
<h1>module_dct_jpeg<a class="headerlink" href="#module-dct-jpeg" title="Permalink to this headline">¶</a></h1>
<p>This module is a proof-of-concept 2D DCT for JPEG compression.</p>
<p>Performance (provided you can stream data in and out):</p>
<ul class="simple">
<li>three 50 MIPS threads compress approx 1.7 Msamples/s.</li>
<li>QVGA greyscale: 22 fps in three 50 MIPS threads.</li>
<li>VGA greyscale: 5 fps in three 50 MIPS threads.</li>
<li>VGA greyscale: 14 fps in three 125 MIPS threads. With an extra DCT thread
this may go up to 20 fps.</li>
<li>Colour-images: approx two thirds of the speed?</li>
</ul>
<p>The performance depends on the compression ratio. When compressing
marginally, Huffman encoding starts to take a serious amount of time.</p>
</div>



          </div>
        </div>
      </div>
      <div class="sphinxsidebar" id='d2'>
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">DSP transformations (0v1)</a></h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">DSP Transforms</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-fft-simple">module_fft_simple</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#complex-fft">Complex FFT</a></li>
<li class="toctree-l3"><a class="reference internal" href="#real-fft">Real FFT</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#module-dct-jpeg">module_dct_jpeg</a></li>
<li class="toctree-l1"><a class="reference internal" href="fft.html">module_fft</a></li>
<li class="toctree-l1"><a class="reference internal" href="dct-jpeg.html">module_dct_jpeg</a></li>
<li class="toctree-l1"><a class="reference internal" href="huffman-jpeg.html">module_huffman_jpeg</a></li>
</ul>

<div id="searchbox" style="display: none;margin-bottom: 10px;">
  <h3>Search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>



    <div class="footer">
    </div>
  </body>
</html>



